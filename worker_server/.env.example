# ===========================================
# Bridgify Backend Environment Variables
# ===========================================

# Server
PORT=8080
ENV=development  # development, production

# ===========================================
# Database
# ===========================================

# PostgreSQL (Supabase)
DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres?pgbouncer=true
DIRECT_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres

# MongoDB
MONGODB_URL=mongodb://user:password@host:port
MONGODB_DATABASE=bridgify

# Redis
REDIS_URL=redis://default:password@host:port

# Neo4j
NEO4J_URL=bolt://host:port
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your-neo4j-password

# ===========================================
# Supabase
# ===========================================
SUPABASE_URL=https://[project-ref].supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# ===========================================
# AI / LLM
# ===========================================
OPENAI_API_KEY=sk-your-openai-api-key
LLM_MODEL=gpt-4o-mini
LLM_MAX_TOKENS=2048
LLM_TEMPERATURE=0.7
LLM_TIMEOUT_SEC=60
LLM_MAX_RETRIES=3

# ===========================================
# OAuth - Google
# ===========================================
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URL=http://localhost:8080/api/v1/oauth/google/callback
GOOGLE_PROJECT_ID=your-google-cloud-project-id  # Required for Gmail Push Notifications (Pub/Sub)

# ===========================================
# OAuth - Microsoft
# ===========================================
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_REDIRECT_URL=http://localhost:8080/api/v1/oauth/microsoft/callback
MICROSOFT_TENANT_ID=common

# ===========================================
# Worker Configuration
# ===========================================
WORKER_MIN=4
WORKER_MAX=16
WORKER_QUEUE_SIZE=10000
WORKER_SCALE_THRESHOLD=0.7

# ===========================================
# Redis Stream Consumer
# ===========================================
CONSUMER_BATCH_SIZE=50
CONSUMER_BLOCK_MS=5000
CONSUMER_MAX_RETRIES=3
CONSUMER_PENDING_CHECK_SEC=60
CONSUMER_RETRY_DELAY_SEC=5

# ===========================================
# Cache
# ===========================================
CACHE_DEFAULT_TTL_MIN=30
CACHE_EMAIL_TTL_MIN=60
CACHE_CALENDAR_TTL_MIN=15
CACHE_SESSION_TTL_HOUR=24
CACHE_MAX_ENTRIES=10000

# ===========================================
# WebSocket
# ===========================================
WS_MAX_MESSAGE_SIZE=524288
WS_PING_INTERVAL_SEC=25
WS_PONG_WAIT_SEC=60
WS_WRITE_WAIT_SEC=10

# ===========================================
# Webhook
# ===========================================
WEBHOOK_TIMEOUT_SEC=30
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY_SEC=5
WEBHOOK_WORKER_COUNT=10

# ===========================================
# CORS
# ===========================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ===========================================
# Scheduler
# ===========================================
SCHEDULER_ENABLED=true
